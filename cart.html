<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/cart.css">
  <link rel="stylesheet" href="description.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"
    integrity="sha512-Ysw1DcK1P+uYLqprEAzNQJP+J4hTx4t/3X2nbVwszao8wD+9afLjBQYjz7Uk4ADP+Er++mJoScI42ueGtQOzEA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.css"
    integrity="sha512-OQDNdI5rpnZ0BRhhJc+btbbtnxaj+LdQFeh0V9/igiEPDiWE2fG+ZsXl0JEH+bjXKPJ3zcXqNyP4/F/NegVdZg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jaro:opsz@6..72&display=swap" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Jaro:opsz@6..72&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Bangers&family=Jaro:opsz@6..72&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Bangers&family=Jaro:opsz@6..72&family=Teko:wght@300..700&display=swap');
  </style>

</head>
<body>
    

    <div class="container-fluid ms-auto bg-light navbar-light col-12 m-0 p-0" style=" z-index: 999;">
        <div class="container-fluid" style="background-color: #FFF4DD;">
          <div class="row">
            <div class="col">
              <nav class="navbar navbar-expand-lg ms-auto ">
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
                  aria-controls="offcanvasRightLabel" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
    
                <ul class="collapse d-xl-flex list-unstyled mt-2">
                  <li class="neww"><a href="products.html" class="navbar-brand text-center "><span>Shop <i
                          class="bi bi-caret-down"></i></span>
                    </a>
                  </li>
                  <li><a href="" class="navbar-brand text-center"><span>Bestsellers</span>
                    </a>
                  </li>
                  <li><a href="" class="navbar-brand text-center"><span>Bundles</span>
                    </a>
                  </li>
                </ul>
                <a href="index.html" target="_self"><span><img src="=./logo-kf (1).svg" alt=""
                      class="d-none d-lg-none d-md-none d-sm-none d-xl-block my-sm-none"
                      style="padding-left:330px;"></span></a>
    
                <div class="collapse navbar-collapse" id="navmenu">
                  <ul class="  navbar-nav ms-auto">
                    <li class="nav-item text-center ps-2"><a href="" class="nav-link" style="color: black;">learn</a>
                    </li>
                    <li class="nav-item text-center ps-2"><a href="" class="nav-link" style="color: black;">About us</a>
                    </li>
                    <li class="nav-item text-center ps-2"><a href="" class="nav-link" style="color: black;">Loyalty
                        Program</a></li>
                  </ul>
                  <li class="list-unstyled  ms-3"><a href=""><i class="bi bi-search"></i></a></li>
                  <li class="list-unstyled  ms-3"><a href="login.html" target="_self"><i class="bi bi-person-fill"></i></a>
                  </li>
                  <li class="list-unstyled  ms-3"><a href="cart.html"><i class="bi bi-cart-fill"></i></a></li>
                </div>
            </div>
          </div>
    
    
          <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasLeftLabel">
            <div class="offcanvas-header">
              <h5 id="offcanvasLeftLabel">Navigation Bar</h5>
              <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav ms-auto">
                <li class="nav-item text-center"><a href="" class="nav-link">learn</a></li>
                <li class="nav-item text-center"><a href="" class="nav-link">About us </a></li>
                <li class="nav-item text-center"><a href="" class="nav-link">Loyalty Program</a></li>
                <li class="list-unstyled  m-auto"><a href="" style="font-size: 20px;"><i class="bi bi-search"></i></a></li>
                <li class="list-unstyled  m-auto"><a href="login.html" target="_self"><i class="bi bi-person-fill"></i></a>
                </li>
                <li class="list-unstyled  m-auto"><a href="cart.html"><i class="bi bi-cart-fill"></i></a></li>
              </ul>
              <ul class="d-flex ms-5 ps-5">
                <li class="list-unstyled p-3 ms-0 d-sm-none d-lg-block"><a href=""><i class="bi bi-twitter"></i></a></li>
                <li class="list-unstyled p-3 d-sm-none d-lg-block"><a href=""><i class="bi bi-facebook"></i></a></li>
                <li class="list-unstyled p-3 d-sm-none d-lg-block"><a href=""><i class="bi bi-instagram"></i></a></li>
                <li class="list-unstyled p-3 d-sm-none d-lg-block"><a href=""><i class="bi bi-linkedin"></i></a></li>
              </ul>
            </div>
          </div>
          </nav>
        </div>
      </div>
    <div class="container">
      <div class="row">
        <h1 class="m-auto text-center p-5" style="font-family: poppins;color: red;font-size: 28px;">CART PRODUCTS</h1>
      </div>
    </div>
<div class="container" >
  <div class="row d-flex" id="cart">
    <div class="card mb-3 m-auto"  style="max-width: 540px;box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;">
      <div class="row g-0">
          <div class="col-md-4">
              <img src="" class="img-fluid rounded-start" id="img" alt="${first_name}">
          </div>
          <div class="col-md-5">
              <div class="card-body">
                  <h5 class="card-title" id="title"></h5>
                  <p class="card-text" id="price"></p>
                  <button class="btn btn-outline-danger">delete</button>
              </div>
          </div>
      </div>
  </div>
  </div>
</div>

</body>
</html>

<script>


function Fetchdata() {
    fetch("https://backend-intern-7cop.onrender.com/cart")
        .then((res) => res.json())
        .then((data) => cardlist(data))
        .catch((err) => console.log(err))
}
Fetchdata()

function cardlist(data) {
  const store = data.map((el) => singlecard(el.img,el.title, el.price, el.id));
  document.getElementById("cart").innerHTML = store.join("");
}


function singlecard(img,title, price,id) {
    let card = `
    <div class="card mb-5" style="width: 18rem;margin:10px;border-radius:15px;padding:0%;margin:auto;box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;">
      <a href="description.html?title=${encodeURIComponent(title)}&img=${encodeURIComponent(img)}&id=${encodeURIComponent(id)}&price=${encodeURIComponent(price)} class="link" style="text-decoration: none; color: inherit;">
        <img src="${img}" class="card-img-top" alt="...">
        <div class="card-body">
          <h5 class="card-title" style="font-size:23px;padding:0px 10px 10px 0px;width:70%">${title}</h5>
          <p class="card-text">${price}</p>
          <button class="btn btn-outline-danger" data-id="${id}">delete</button>
        </div>
      </a>
          </div>
    `;
    return card;
}

document.addEventListener("click", (event) => {
    if (event.target.classList.contains("btn")) {
        const productId = event.target.dataset.id;
        console.log(productId)
        deleteProduct(productId);
    }
});

function deleteProduct(id) {
    fetch(`https://backend-intern-7cop.onrender.com/cart/${id}`, {
        method: "DELETE",
    })
        .then((res) => res.json())
        .then((data) => {
            console.log(data);
            fetchData();
        })
        .catch((err) => console.log(err));
}


</script>
